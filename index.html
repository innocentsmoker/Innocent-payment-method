<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INNOCENT TECH  - M-Pesa STK Push Payment</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-green: #28a745;
            --secondary-green: #20c997;
            --dark-green: #218838;
            --gold: #ffc107;
            --dark-gold: #e0a800;
            --red: #dc3545;
            --dark-red: #c82333;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --text-dark: #343a40;
            --text-light: #6c757d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #d4edda 0%, #f8d7da 25%, #fff3cd 50%, #d1ecf1 75%, #d4edda 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: var(--text-dark);
            background-size: 400% 400%;
            animation: gradientBG 20s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            width: 100%;
            max-width: 900px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            border-image: linear-gradient(90deg, var(--primary-green), var(--gold), var(--red)) 1;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .logo-icon {
            font-size: 3rem;
            margin-right: 20px;
            background: linear-gradient(90deg, var(--primary-green), var(--gold), var(--red));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .logo-text h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary-green), var(--gold), var(--red));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 5px;
        }

        .logo-text p {
            color: var(--text-light);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .tagline {
            color: var(--text-light);
            font-size: 1rem;
            margin-top: 10px;
            font-style: italic;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            max-width: 1200px;
            width: 100%;
            justify-content: center;
            align-items: stretch;
        }

        .payment-form-container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 35px;
            flex: 1;
            min-width: 350px;
            max-width: 550px;
            border: 3px solid transparent;
            border-image: linear-gradient(90deg, var(--primary-green), var(--gold), var(--red)) 1;
            transition: transform 0.3s ease;
        }

        .payment-form-container:hover {
            transform: translateY(-5px);
        }

        .payment-form-container h2 {
            color: var(--primary-green);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #f0f0f0;
            font-size: 2rem;
            text-align: center;
            position: relative;
        }

        .payment-form-container h2:after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-green), var(--gold), var(--red));
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1.1rem;
        }

        .form-control {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e1e5ee;
            border-radius: 12px;
            font-size: 17px;
            transition: all 0.3s;
            background-color: var(--white);
        }

        .form-control:focus {
            border-color: var(--primary-green);
            outline: none;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2);
        }

        .form-control.error {
            border-color: var(--red);
            background-color: rgba(220, 53, 69, 0.05);
        }

        .form-control.success {
            border-color: var(--primary-green);
            background-color: rgba(40, 167, 69, 0.05);
        }

        .error-message {
            color: var(--red);
            font-size: 0.9rem;
            margin-top: 8px;
            display: none;
        }

        .phone-input-wrapper {
            position: relative;
        }

        .phone-prefix {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 600;
            color: var(--text-light);
            z-index: 2;
        }

        .phone-input {
            padding-left: 50px !important;
        }

        .phone-helper {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
        }

        .phone-count {
            font-weight: 600;
        }

        .phone-count.error {
            color: var(--red);
        }

        .phone-count.success {
            color: var(--primary-green);
        }

        .amount-input-wrapper {
            position: relative;
        }

        .amount-prefix {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 600;
            color: var(--text-light);
            z-index: 2;
        }

        .amount-input {
            padding-left: 60px !important;
        }

        .amount-limits {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.9rem;
        }

        .min-amount {
            color: var(--primary-green);
            font-weight: 600;
        }

        .max-amount {
            color: var(--red);
            font-weight: 600;
        }

        .quick-amounts {
            margin-top: 15px;
        }

        .quick-amounts h4 {
            margin-bottom: 15px;
            color: var(--text-dark);
            font-size: 1.1rem;
        }

        .amount-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .amount-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 480px) {
            .amount-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .amount-btn {
            padding: 12px 5px;
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            color: var(--text-dark);
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            font-size: 1rem;
        }

        .amount-btn:hover {
            background: linear-gradient(135deg, var(--dark-gold), #d39e00);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }

        .amount-btn.active {
            background: linear-gradient(135deg, var(--primary-green), var(--dark-green));
            color: white;
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .info-box {
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 5px solid;
        }

        .pochi-box {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-left-color: var(--primary-green);
        }

        .security-box {
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
            border-left-color: var(--red);
        }

        .info-box h3 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pochi-box h3 {
            color: var(--dark-green);
        }

        .security-box h3 {
            color: var(--dark-red);
        }

        .info-box p {
            line-height: 1.6;
            color: var(--text-dark);
        }

        .pochi-number {
            font-weight: 800;
            font-size: 1.4rem;
            color: var(--red);
            background-color: white;
            padding: 8px 15px;
            border-radius: 8px;
            display: inline-block;
            margin: 10px 0;
            border: 2px dashed var(--gold);
        }

        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(90deg, var(--primary-green), var(--secondary-green));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            letter-spacing: 0.5px;
        }

        .btn:hover:not(:disabled) {
            background: linear-gradient(90deg, var(--dark-green), #1ba87e);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(40, 167, 69, 0.3);
        }

        .btn:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .btn:disabled {
            background: #a0a0a0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn i {
            margin-right: 10px;
        }

        .payment-steps-container {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            padding: 35px;
            flex: 1;
            min-width: 350px;
            max-width: 550px;
            border: 3px solid transparent;
            border-image: linear-gradient(90deg, var(--gold), var(--red), var(--primary-green)) 1;
            transition: transform 0.3s ease;
        }

        .payment-steps-container:hover {
            transform: translateY(-5px);
        }

        .payment-steps-container h2 {
            color: var(--red);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #f0f0f0;
            font-size: 2rem;
            text-align: center;
            position: relative;
        }

        .payment-steps-container h2:after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), var(--red), var(--primary-green));
        }

        .steps {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .step {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .step-number {
            background: linear-gradient(135deg, var(--red), var(--gold));
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.2rem;
            flex-shrink: 0;
            box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }

        .step-content h3 {
            margin-bottom: 10px;
            color: var(--text-dark);
            font-size: 1.3rem;
        }

        .step-content p {
            color: var(--text-light);
            line-height: 1.6;
        }

        .mpesa-stk-info {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            border-left: 5px solid #2196f3;
        }

        .mpesa-stk-info h3 {
            color: #0d47a1;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mpesa-stk-info p {
            color: #0d47a1;
            line-height: 1.6;
        }

        .footer {
            margin-top: 50px;
            text-align: center;
            color: var(--text-light);
            font-size: 0.95rem;
            width: 100%;
            max-width: 900px;
            padding: 25px;
            border-top: 1px solid #ddd;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
        }

        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            padding: 35px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            animation: modalFade 0.4s;
            border: 3px solid transparent;
            border-image: linear-gradient(90deg, var(--primary-green), var(--gold), var(--red)) 1;
        }

        @keyframes modalFade {
            from {opacity: 0; transform: translateY(-40px) scale(0.9);}
            to {opacity: 1; transform: translateY(0) scale(1);}
        }

        .modal-content h3 {
            color: var(--primary-green);
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .modal-content p {
            margin-bottom: 20px;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-green);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 25px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-icon {
            color: var(--primary-green);
            font-size: 5rem;
            margin: 20px 0;
            animation: bounce 1s;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-20px);}
            60% {transform: translateY(-10px);}
        }

        .thankyou-message {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-radius: 12px;
            padding: 20px;
            margin: 25px 0;
            border-left: 5px solid var(--primary-green);
        }

        .thankyou-message h4 {
            color: var(--dark-green);
            margin-bottom: 10px;
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .thankyou-message p {
            color: var(--dark-green);
            font-size: 1rem;
            line-height: 1.6;
        }

        .transaction-details {
            background-color: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            border: 2px solid #e9ecef;
        }

        .transaction-details p {
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .transaction-details .label {
            font-weight: 600;
            color: var(--text-light);
            flex: 1;
        }

        .transaction-details .value {
            color: var(--text-dark);
            font-weight: 700;
            flex: 2;
            text-align: right;
        }

        .close-btn {
            background: linear-gradient(90deg, var(--gold), var(--dark-gold));
            color: var(--text-dark);
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            font-size: 1.1rem;
            width: 100%;
        }

        .close-btn:hover {
            background: linear-gradient(90deg, var(--dark-gold), #d39e00);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }

        .error-icon {
            color: var(--red);
            font-size: 5rem;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }
            
            .payment-form-container, .payment-steps-container {
                max-width: 100%;
            }
            
            .header {
                padding: 15px;
            }
            
            .logo-text h1 {
                font-size: 2rem;
            }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 9999;
            display: flex;
            justify-content: space-between;
            align-items: center;
            min-width: 300px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: slideIn 0.3s, fadeOut 0.3s 2.7s;
            opacity: 0.95;
        }

        .toast-success {
            background: linear-gradient(90deg, var(--primary-green), var(--secondary-green));
        }

        .toast-warning {
            background: linear-gradient(90deg, var(--gold), #ff9800);
        }

        .toast-error {
            background: linear-gradient(90deg, var(--red), #e53935);
        }

        .toast button {
            background: transparent;
            border: none;
            color: white;
            font-size: 22px;
            cursor: pointer;
            margin-left: 20px;
            line-height: 1;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 0.95; }
        }

        @keyframes fadeOut {
            from { opacity: 0.95; }
            to { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-hand-holding-usd"></i>
            </div>
            <div class="logo-text">
                <h1>Innocent Tech Payments</h1>
                <p>Secure M-Pesa STK Push Payment Gateway</p>
            </div>
        </div>
        <div class="tagline">
            Fast, Secure, and Convenient Mobile Payments
        </div>
    </div>

    <div class="container">
        <div class="payment-form-container">
            <h2><i class="fas fa-mobile-alt"></i> Payment Request</h2>
            
            <div class="info-box pochi-box">
                <h3><i class="fas fa-qrcode"></i> Pochi La Biashara</h3>
                <p>Make instant payments to our business via M-Pesa STK Push:</p>
                <div class="pochi-number">0741 212 845</div>
                <p>No app needed. Just enter your phone number and amount below.</p>
            </div>
            
            <form id="paymentForm">
                <div class="form-group">
                    <label for="phone"><i class="fas fa-phone"></i> M-Pesa Phone Number</label>
                    <div class="phone-input-wrapper">
                        <span class="phone-prefix">+254</span>
                        <input type="tel" id="phone" class="form-control phone-input" 
                               placeholder="712 345 678" 
                               maxlength="9"
                               required>
                    </div>
                    <div class="phone-helper">
                        <span>Enter 9 digits without the leading 0</span>
                        <span class="phone-count">0/9</span>
                    </div>
                    <div class="error-message" id="phoneError">Phone number must be exactly 10 digits</div>
                </div>
                
                <div class="form-group">
                    <label for="amount"><i class="fas fa-money-bill-wave"></i> Payment Amount (KES)</label>
                    <div class="amount-input-wrapper">
                        <span class="amount-prefix">KES</span>
                        <input type="number" id="amount" class="form-control amount-input" 
                               min="30" max="5000" 
                               placeholder="Enter amount between 30 and 5000" 
                               required>
                    </div>
                    <div class="amount-limits">
                        <span class="min-amount">Minimum: KES 30</span>
                        <span class="max-amount">Maximum: KES 5,000</span>
                    </div>
                </div>
                
                <div class="quick-amounts">
                    <h4><i class="fas fa-bolt"></i> Quick Amount Selection</h4>
                    <div class="amount-grid">
                        <button type="button" class="amount-btn" data-amount="30">KES 30</button>
                        <button type="button" class="amount-btn" data-amount="50">KES 50</button>
                        <button type="button" class="amount-btn" data-amount="70">KES 70</button>
                        <button type="button" class="amount-btn" data-amount="100">KES 100</button>
                        <button type="button" class="amount-btn" data-amount="150">KES 150</button>
                        <button type="button" class="amount-btn" data-amount="200">KES 200</button>
                        <button type="button" class="amount-btn" data-amount="250">KES 250</button>
                        <button type="button" class="amount-btn" data-amount="300">KES 300</button>
                        <button type="button" class="amount-btn" data-amount="500">KES 500</button>
                        <button type="button" class="amount-btn" data-amount="1000">KES 1,000</button>
                        <button type="button" class="amount-btn" data-amount="1500">KES 1,500</button>
                        <button type="button" class="amount-btn" data-amount="2000">KES 2,000</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="description"><i class="fas fa-file-alt"></i> Payment Description (Optional)</label>
                    <input type="text" id="description" class="form-control" placeholder="e.g. Payment for services, Invoice #12345">
                </div>
                
                <button type="submit" class="btn" id="submitBtn">
                    <i class="fas fa-paper-plane"></i> Send M-Pesa Payment Request
                </button>
            </form>
            
            <div class="info-box security-box">
                <h3><i class="fas fa-shield-alt"></i> Security Assurance</h3>
                <p>Your payment is processed securely via Safaricom's M-Pesa STK Push system. You will receive a prompt on your phone to enter your M-Pesa PIN. We never store your PIN or personal financial information. All transactions are encrypted.</p>
            </div>
        </div>
        
        <div class="payment-steps-container">
            <h2><i class="fas fa-list-ol"></i> How It Works</h2>
            
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <h3>Enter Phone & Amount</h3>
                        <p>Provide your 9-digit M-Pesa registered phone number (without leading 0) and select payment amount (KES 30 - 5,000).</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <h3>Initiate STK Push</h3>
                        <p>Click "Send M-Pesa Payment Request" to trigger an STK Push directly to your phone via Safaricom.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <h3>Enter M-Pesa PIN</h3>
                        <p>Check your phone for an M-Pesa STK Push prompt and enter your PIN to authorize payment to Pochi La Biashara.</p>
                    </div>
                </div>
                
                <div class="step">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3>Receive Confirmation</h3>
                        <p>Get instant M-Pesa confirmation SMS and see payment success notification with thank you message.</p>
                    </div>
                </div>
            </div>
            
            <div class="mpesa-stk-info">
                <h3><i class="fas fa-info-circle"></i> About STK Push Technology</h3>
                <p>STK (Sim ToolKit) Push sends a direct payment prompt to your mobile device without needing the M-Pesa app or dialing USSD codes. It's the fastest and most secure way to make mobile payments in Kenya, directly integrated with Safaricom's M-Pesa system.</p>
            </div>
            
            <div class="info-box" style="background: linear-gradient(135deg, #f3e5f5, #e1bee7); border-left-color: #9c27b0; margin-top: 25px;">
                <h3 style="color: #7b1fa2;"><i class="fas fa-clock"></i> Processing Time</h3>
                <p>Most payments are processed within 30 seconds. If you don't receive the STK Push within 60 seconds, please try again. Payment confirmations are sent immediately after completion.</p>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p><i class="fas fa-copyright"></i> 2025 INNOCENT TECH Payment Solutions. All rights reserved.</p>
        <p><i class="fas fa-info-circle"></i> This is a simulated M-Pesa STK Push payment interface for demonstration purposes.</p>
        <p style="margin-top: 10px;"><i class="fas fa-headset"></i> Need help? Contact support: support@innocenttech.co.ke | +254 741 212 845</p>
    </div>
    
    <!-- Payment Processing Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="modal-content">
            <div id="processingContent">
                <h3><i class="fas fa-cogs"></i> Initiating Payment</h3>
                <p>Please wait while we connect to Safaricom M-Pesa gateway...</p>
                <div class="loader"></div>
                <p id="processingMessage">Establishing secure connection...</p>
            </div>
            
            <div id="successContent" style="display: none;">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3>Payment Request Sent!</h3>
                
                <div class="transaction-details">
                    <p>
                        <span class="label">Recipient:</span>
                        <span class="value">Pochi La Biashara</span>
                    </p>
                    <p>
                        <span class="label">Phone:</span>
                        <span class="value">0741 212 845</span>
                    </p>
                    <p>
                        <span class="label">From:</span>
                        <span class="value" id="displayPhone">0712 345 678</span>
                    </p>
                    <p>
                        <span class="label">Amount:</span>
                        <span class="value">KES <span id="displayAmount">0</span></span>
                    </p>
                    <p>
                        <span class="label">Reference:</span>
                        <span class="value">INN<span id="referenceNumber">123456</span></span>
                    </p>
                    <p>
                        <span class="label">Time:</span>
                        <span class="value" id="transactionTime">12:45 PM</span>
                    </p>
                </div>
                
                <div class="thankyou-message">
                    <h4><i class="fas fa-heart"></i> Thank You For Your Payment!</h4>
                    <p>We sincerely appreciate your business and the trust you've placed in Innocent Tech. Your payment has been successfully processed and will be reflected in our account shortly. We're grateful for your support and look forward to serving you again!</p>
                </div>
                
                <p><strong><i class="fas fa-mobile-alt"></i> Check your phone now and enter your M-Pesa PIN to complete the transaction.</strong></p>
                <p style="font-size: 0.95rem; color: var(--text-light); margin-top: 15px;">You will receive an M-Pesa confirmation SMS within moments.</p>
                
                <button class="close-btn" id="closeModalBtn">
                    <i class="fas fa-times"></i> Close This Window
                </button>
            </div>
            
            <div id="errorContent" style="display: none;">
                <div class="error-icon">
                    <i class="fas fa-exclamation-circle"></i>
                </div>
                <h3>Payment Request Failed</h3>
                <p id="errorMessage">There was an error processing your payment request. Please try again.</p>
                <button class="close-btn" id="errorCloseBtn">
                    <i class="fas fa-redo"></i> Try Again
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const paymentForm = document.getElementById('paymentForm');
            const paymentModal = document.getElementById('paymentModal');
            const processingContent = document.getElementById('processingContent');
            const successContent = document.getElementById('successContent');
            const errorContent = document.getElementById('errorContent');
            const displayPhone = document.getElementById('displayPhone');
            const displayAmount = document.getElementById('displayAmount');
            const referenceNumber = document.getElementById('referenceNumber');
            const transactionTime = document.getElementById('transactionTime');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const errorCloseBtn = document.getElementById('errorCloseBtn');
            const submitBtn = document.getElementById('submitBtn');
            const phoneInput = document.getElementById('phone');
            const amountInput = document.getElementById('amount');
            const phoneError = document.getElementById('phoneError');
            const phoneCount = document.querySelector('.phone-count');
            const processingMessage = document.getElementById('processingMessage');
            const errorMessage = document.getElementById('errorMessage');
            const amountButtons = document.querySelectorAll('.amount-btn');
            
            let selectedAmountBtn = null;
            
            // Format phone number as user types (only numbers, max 9 digits)
            phoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                
                // Limit to 9 digits
                if (value.length > 9) {
                    value = value.substring(0, 9);
                }
                
                // Format with spaces for readability
                if (value.length > 6) {
                    value = value.substring(0, 3) + ' ' + value.substring(3, 6) + ' ' + value.substring(6);
                } else if (value.length > 3) {
                    value = value.substring(0, 3) + ' ' + value.substring(3);
                }
                
                e.target.value = value;
                
                // Update character count
                const digitCount = value.replace(/\s/g, '').length;
                phoneCount.textContent = `${digitCount}/9`;
                
                // Validate phone number
                validatePhoneNumber();
            });
            
            // Validate phone number function
            function validatePhoneNumber() {
                const phoneDigits = phoneInput.value.replace(/\s/g, '');
                const isValid = phoneDigits.length === 9 && /^[0-9]{9}$/.test(phoneDigits);
                
                if (phoneDigits.length === 0) {
                    phoneInput.classList.remove('error', 'success');
                    phoneCount.classList.remove('error', 'success');
                    phoneError.style.display = 'none';
                    phoneCount.textContent = '0/9';
                    return false;
                }
                
                if (isValid) {
                    phoneInput.classList.remove('error');
                    phoneInput.classList.add('success');
                    phoneCount.classList.remove('error');
                    phoneCount.classList.add('success');
                    phoneError.style.display = 'none';
                    return true;
                } else {
                    phoneInput.classList.remove('success');
                    phoneInput.classList.add('error');
                    phoneCount.classList.remove('success');
                    phoneCount.classList.add('error');
                    
                    if (phoneDigits.length > 0) {
                        phoneError.style.display = 'block';
                    } else {
                        phoneError.style.display = 'none';
                    }
                    
                    return false;
                }
            }
            
            // Validate amount as user types
            amountInput.addEventListener('input', function(e) {
                let value = parseInt(e.target.value) || 0;
                
                if (value > 5000) {
                    e.target.value = 5000;
                    showToast("Maximum amount is KES 5,000", "warning");
                }
                if (value < 30 && value > 0) {
                    e.target.value = 30;
                    showToast("Minimum amount is KES 30", "warning");
                }
                
                // Remove active class from amount buttons if amount doesn't match
                if (selectedAmountBtn && parseInt(selectedAmountBtn.getAttribute('data-amount')) !== value) {
                    selectedAmountBtn.classList.remove('active');
                    selectedAmountBtn = null;
                }
            });
            
            // Handle quick amount button clicks
            amountButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const amount = this.getAttribute('data-amount');
                    
                    // Remove active class from previously selected button
                    if (selectedAmountBtn) {
                        selectedAmountBtn.classList.remove('active');
                    }
                    
                    // Set active class to current button
                    this.classList.add('active');
                    selectedAmountBtn = this;
                    
                    // Update amount input
                    amountInput.value = amount;
                    
                    // Show success toast
                    showToast(`Amount set to KES ${amount}`, "success");
                    
                    // Focus on next field for better UX
                    document.getElementById('description').focus();
                });
            });
            
            // Handle form submission
            paymentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form values
                const phoneDigits = phoneInput.value.replace(/\s/g, '');
                const amount = amountInput.value;
                const description = document.getElementById('description').value || 'Payment to Innocent Tech';
                
                // Validate phone number
                if (!validatePhoneNumber()) {
                    showToast("Please enter a valid 9-digit phone number", "error");
                    phoneInput.focus();
                    return;
                }
                
                // Validate amount
                if (!amount || amount < 30 || amount > 5000) {
                    showToast("Please enter a valid amount between KES 30 and KES 5,000", "error");
                    amountInput.focus();
                    return;
                }
                
                // Show processing modal
                showProcessingModal(phoneDigits, amount);
                
                // Simulate M-Pesa STK Push processing
                simulateSTKPushProcessing(phoneDigits, amount, description);
            });
            
            // Show processing modal
            function showProcessingModal(phone, amount) {
                paymentModal.style.display = 'flex';
                processingContent.style.display = 'block';
                successContent.style.display = 'none';
                errorContent.style.display = 'none';
                
                // Display formatted phone number (add leading 0 for display)
                const displayPhoneNumber = '0' + phone.substring(0, 3) + ' ' + phone.substring(3, 6) + ' ' + phone.substring(6);
                displayPhone.textContent = displayPhoneNumber;
                displayAmount.textContent = Number(amount).toLocaleString();
                
                // Generate a random reference number
                const refNum = Math.floor(100000 + Math.random() * 900000);
                referenceNumber.textContent = refNum;
                
                // Set current time
                const now = new Date();
                const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                transactionTime.textContent = timeString;
                
                // Disable submit button
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing STK Push...';
            }
            
            // Show success modal
            function showSuccessModal() {
                processingContent.style.display = 'none';
                successContent.style.display = 'block';
                errorContent.style.display = 'none';
                
                // Reset form and remove active button
                paymentForm.reset();
                if (selectedAmountBtn) {
                    selectedAmountBtn.classList.remove('active');
                    selectedAmountBtn = null;
                }
                phoneCount.textContent = '0/9';
                phoneInput.classList.remove('success', 'error');
                phoneError.style.display = 'none';
                
                // Re-enable submit button after a delay
                setTimeout(() => {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send M-Pesa Payment Request';
                }, 3000);
            }
            
            // Show error modal
            function showError(message) {
                paymentModal.style.display = 'flex';
                processingContent.style.display = 'none';
                successContent.style.display = 'none';
                errorContent.style.display = 'block';
                
                errorMessage.textContent = message;
                
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send M-Pesa Payment Request';
            }
            
            // Show toast notification
            function showToast(message, type) {
                // Remove existing toasts
                document.querySelectorAll('.toast').forEach(toast => toast.remove());
                
                // Create toast element
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                toast.innerHTML = `
                    <span>${message}</span>
                    <button onclick="this.parentElement.remove()">&times;</button>
                `;
                
                document.body.appendChild(toast);
                
                // Remove toast after 3 seconds
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                }, 3000);
            }
            
            // Simulate M-Pesa STK Push processing with realistic messages
            function simulateSTKPushProcessing(phone, amount, description) {
                const steps = [
                    {time: 1000, message: "Connecting to Safaricom M-Pesa gateway..."},
                    {time: 2500, message: "Authenticating request..."},
                    {time: 4000, message: "Generating STK Push request..."},
                    {time: 5500, message: "Sending payment prompt to your phone..."},
                    {time: 7000, message: "Waiting for user confirmation..."}
                ];
                
                steps.forEach(step => {
                    setTimeout(() => {
                        processingMessage.textContent = step.message;
                    }, step.time);
                });
                
                // Simulate successful STK Push after 8 seconds
                setTimeout(() => {
                    // 90% chance of success for demo purposes
                    if (Math.random() < 0.9) {
                        showSuccessModal();
                        showToast("STK Push sent successfully! Check your phone for the prompt.", "success");
                    } else {
                        // Random error messages
                        const errors = [
                            "Unable to connect to M-Pesa. Please check your network connection and try again.",
                            "Your phone number is not registered for M-Pesa. Please use a registered Safaricom number.",
                            "Daily transaction limit exceeded. Please try again tomorrow or use a smaller amount.",
                            "System is temporarily busy. Please try again in a few moments.",
                            "Insufficient M-Pesa balance. Please ensure you have enough funds."
                        ];
                        const randomError = errors[Math.floor(Math.random() * errors.length)];
                        showError(randomError);
                        showToast("Payment request failed. Please try again.", "error");
                    }
                }, 8000);
            }
            
            // Close modal buttons
            closeModalBtn.addEventListener('click', function() {
                paymentModal.style.display = 'none';
                showToast("Payment process completed. Thank you!", "success");
            });
            
            errorCloseBtn.addEventListener('click', function() {
                paymentModal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target === paymentModal) {
                    paymentModal.style.display = 'none';
                }
            });
            
            // Demo: Auto-fill form with sample data for testing
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('demo')) {
                phoneInput.value = '712 345 678';
                validatePhoneNumber();
                amountInput.value = '500';
                document.getElementById('description').value = 'Payment for Innocent Tech services';
                
                // Auto-select the corresponding amount button
                amountButtons.forEach(btn => {
                    if (btn.getAttribute('data-amount') === '500') {
                        btn.click();
                    }
                });
                
                showToast("Demo mode activated. Form pre-filled with sample data.", "success");
            }
            
            // Add keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl+Enter to submit form
                if (e.ctrlKey && e.key === 'Enter') {
                    if (!submitBtn.disabled) {
                        paymentForm.requestSubmit();
                    }
                }
                
                // Escape to close modal
                if (e.key === 'Escape' && paymentModal.style.display === 'flex') {
                    paymentModal.style.display = 'none';
                }
            });
            
            // Initialize form validation on page load
            validatePhoneNumber();
        });
    </script>
</body>
    </html>
